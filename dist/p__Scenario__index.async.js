"use strict";(self.webpackChunkflight_simulator_manage=self.webpackChunkflight_simulator_manage||[]).push([[487],{23366:function(V,O,r){r.r(O),r.d(O,{default:function(){return Ve}});var ee=r(85851),z=r.n(ee),re=r(3447),d=r.n(re),ne=r(90887),x=r.n(ne),te=r(96592),E=r.n(te),ae=r(37066),I=r.n(ae),W=r(25857),le=r(2699),ue=r(62518),S=r(19233),F=r(21805),B=r(50956),se=function(){var p=x()(d()().mark(function a(n,m){return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",B.Z.get("".concat(S.rf,"/list"),n,{data:m}));case 1:case"end":return c.stop()}},a)}));return function(n,m){return p.apply(this,arguments)}}(),ie=function(){var p=x()(d()().mark(function a(n){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",B.Z.post("".concat(S.rf,"/add"),n));case 1:case"end":return s.stop()}},a)}));return function(n){return p.apply(this,arguments)}}(),oe=function(){var p=x()(d()().mark(function a(n,m){return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",B.Z.put("".concat(S.rf,"/modify/").concat(n),m));case 1:case"end":return c.stop()}},a)}));return function(n,m){return p.apply(this,arguments)}}(),ce=function(){var p=x()(d()().mark(function a(n){var m,s;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return m=n.type,s=n.id,f.abrupt("return",B.Z.patch("".concat(S.rf,"/").concat(m,"/").concat(s)));case 2:case"end":return f.stop()}},a)}));return function(n){return p.apply(this,arguments)}}(),de=function(){var p=x()(d()().mark(function a(n){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",B.Z.post("".concat(S.rf,"/import"),n));case 1:case"end":return s.stop()}},a)}));return function(n){return p.apply(this,arguments)}}(),w=r(49930),$=r(97906),me=r(71298),fe=r(11663),K=r(31923),T=r(12320),U=r(35578),L=r(91129),v=r(68136),ve=r(31890),pe=r(43998),he=function(){var a=(0,v.useState)([]),n=I()(a,2),m=n[0],s=n[1],c=(0,v.useCallback)(x()(d()().mark(function f(){var h,j,g;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,pe.b4)({current:1,pageSize:1e4});case 2:g=l.sent,s(g==null||(h=g.data)===null||h===void 0||(j=h.list)===null||j===void 0?void 0:j.filter(function(o){var u=o.status;return u===F.i8.ONLINE}));case 4:case"end":return l.stop()}},f)})),[]);return(0,v.useEffect)(function(){c()},[c]),{talentListEnum:m}},ge=he,xe=r(9845),H=r(3244),Ce=r(99163),M=r(50769),J=r(94011),je=r(97326),ye=r(42347),e=r(33130),Ze=["fieldProps","proFieldProps"],Ee=function(a,n){var m=a.fieldProps,s=a.proFieldProps,c=(0,je.Z)(a,Ze);return(0,e.jsx)(ye.Z,(0,J.Z)({valueType:"digitRange",fieldProps:(0,J.Z)({},m),ref:n,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:s},c))},Te=v.forwardRef(Ee),Fe=r(3303),k=r.n(Fe),Se=r(92921),Q=r(6860),X=r(31478),Le={icon:function(a,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:a}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:n}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:a}}]}},name:"close-circle",theme:"twotone"},Ae=Le,Y=r(41122),Be=function(a,n){return v.createElement(Y.Z,(0,X.Z)({},a,{ref:n,icon:Ae}))},Pe=v.forwardRef(Be),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},we=Ie,Ne=function(a,n){return v.createElement(Y.Z,(0,X.Z)({},a,{ref:n,icon:we}))},De=v.forwardRef(Ne),be=function(){return(0,e.jsx)(T.Z.List,{name:"chapterList",initialValue:[{chapterContentList:[{}]}],children:function(n,m){var s=m.add,c=m.remove;return(0,e.jsxs)(T.Z.Item,{label:"\u7AE0\u8282\u5185\u5BB9",children:[(0,e.jsx)(L.ZP,{type:"link",onClick:function(){return s({chapterContentList:[{}]})},icon:(0,e.jsx)($.Z,{}),children:"\u65B0\u589E\u7AE0\u8282"}),n.map(function(f,h){return(0,e.jsx)("div",{className:k()("w-[100%]",{"mt-[30px]":!!h}),children:(0,e.jsx)(T.Z.List,{name:[f.name,"chapterContentList"],children:function(g,i){var l=i.add,o=i.remove;return(0,e.jsxs)(T.Z.Item,{label:"\u7AE0\u8282".concat(h+1),children:[(0,e.jsxs)("div",{className:"flex justify-between mb-[10px]",children:[(0,e.jsx)(L.ZP,{type:"link",onClick:l,icon:(0,e.jsx)($.Z,{}),children:"\u65B0\u589E\u5185\u5BB9"}),(0,e.jsx)(T.Z.Item,{className:"w-[50%] mb-0",label:"\u5224\u65AD\u65B9\u5F0F",name:[f.name,"judgeCode"],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5224\u65AD\u65B9\u5F0F"}],children:(0,e.jsx)(Se.Z,{placeholder:"\u8BF7\u9009\u62E9\u5224\u65AD\u65B9\u5F0F",options:[{label:"121",value:"333"}]})}),n.length>1&&(0,e.jsx)(Pe,{className:"dynamic-delete-button pr-[5px] pl-[10px] text-[16px]",onClick:function(){return c(f.name)}})]}),g.map(function(u,t){return(0,e.jsxs)("div",{className:k()({"mt-[30px]":!!t}),children:[g.length>1&&(0,e.jsxs)("div",{className:"flex items-start justify-between",children:[(0,e.jsx)(T.Z.Item,{className:"flex-1",label:"\u9009\u9879".concat(t+1),name:[u.name,"selection"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9009\u9879"}],children:(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u9009\u9879",maxLength:200})}),(0,e.jsx)(De,{className:"dynamic-delete-button pt-[8px] pr-[5px] pl-[10px] text-[16px]",onClick:function(){return o(u.name)}})]}),(0,e.jsx)(T.Z.Item,{className:k()({"mt-[10px]":g.length>1}),label:"\u7AE0\u8282\u5185\u5BB9".concat(t+1),name:[u.name,"chapterContent"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7AE0\u8282\u5185\u5BB9"}],children:(0,e.jsx)(Q.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u7AE0\u8282\u5185\u5BB9",maxLength:1e3,showCount:!0})})]},u.key)})]})}})},f.key)})]})}})},Re=be,Oe=["talents","minAge","maxAge"],ze=["_triggerAge"],$e=function(a){var n=a.detailData,m=a.visible,s=a.reloadTable,c=a.onOpenChange,f=ge(),h=f.talentListEnum,j=(0,v.useRef)(),g=(0,v.useState)(!1),i=I()(g,2),l=i[0],o=i[1];(0,v.useEffect)(function(){if(n){var t,y=n.talents,C=n.minAge,N=n.maxAge,D=z()(n,Oe);(t=j.current)===null||t===void 0||t.setFieldsValue(E()(E()({},D),{},{_triggerAge:[C,N],_talentIds:y==null?void 0:y.map(function(P){var b=P.id;return b})}))}else{var A;(A=j.current)===null||A===void 0||A.resetFields()}},[n]);var u=(0,v.useCallback)(function(){var t=x()(d()().mark(function y(C){var N,D,A,P,b,q,G,_,R;return d()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(Z.prev=0,o(!0),N=C._triggerAge,D=z()(C,ze),A=N||[],P=I()(A,2),b=P[0],q=P[1],G=E()(E()({},D),{},{minAge:b,maxAge:q}),_=n||{},R=_.id,!R){Z.next=11;break}return Z.next=9,oe(R,G);case 9:Z.next=13;break;case 11:return Z.next=13,ie(G);case 13:K.ZP.success(R?"\u7F16\u8F91\u6210\u529F\uFF01":"\u65B0\u589E\u6210\u529F\uFF01"),c(!1),s();case 16:return Z.prev=16,o(!1),Z.finish(16);case 19:case"end":return Z.stop()}},y,null,[[0,,16,19]])}));return function(y){return t.apply(this,arguments)}}(),[c,s,n]);return(0,e.jsxs)(xe.a,{title:n?"\u7F16\u8F91\u5267\u60C5":"\u65B0\u589E\u5267\u60C5",open:m,formRef:j,loading:l,onOpenChange:c,onFinish:u,layout:"horizontal",children:[(0,e.jsxs)(H.A.Group,{children:[(0,e.jsx)(Ce.Z,{width:"sm",name:"storyTitle",label:"\u5267\u60C5\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5267\u60C5\u6807\u9898"}],fieldProps:{maxLength:20}}),(0,e.jsx)(M.Z,{width:"sm",name:"storyTypeCode",label:"\u5267\u60C5\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5267\u60C5\u7C7B\u578B"}],request:x()(d()().mark(function t(){return d()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,w.Rf)("storyType");case 2:return C.abrupt("return",C.sent);case 3:case"end":return C.stop()}},t)}))}),(0,e.jsx)(M.Z,{width:"sm",name:"raceCode",label:"\u9002\u7528\u79CD\u65CF"})]}),(0,e.jsxs)(H.A.Group,{children:[(0,e.jsx)(Te,{width:"sm",name:"_triggerAge",label:"\u9002\u7528\u5E74\u9F84",separator:"~",placeholder:["\u6700\u5C0F\u503C","\u6700\u5927\u503C"]}),(0,e.jsx)(M.Z,{width:"lg",name:"_talentIds",label:"\u5929\u8D4B\u6761\u4EF6",options:h,fieldProps:{mode:"multiple",fieldNames:{label:"talentTitle",value:"id"}}})]}),(0,e.jsx)(ve.Z,{label:"\u5C5E\u6027\u6761\u4EF6",name:"attributeList",addBtnText:"\u6DFB\u52A0\u6761\u4EF6",initialValue:[{}]}),(0,e.jsx)(Re,{})]})},Me=$e,ke=["_triggerAge"],Ge=function(){var a=(0,v.useReducer)(function(i,l){return E()(E()({},i),l)},S.L6),n=I()(a,2),m=n[0],s=n[1],c=(0,v.useRef)(),f=(0,v.useCallback)(function(){var i;(i=c.current)===null||i===void 0||i.reload()},[]),h=(0,v.useCallback)(function(){var i=x()(d()().mark(function l(o){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(o);case 2:f(),K.ZP.success("".concat(F.bM[o.type],"\u6210\u529F\uFF01"));case 4:case"end":return t.stop()}},l)}));return function(l){return i.apply(this,arguments)}}(),[f]),j=(0,v.useCallback)(function(i){var l=i||{},o=l._triggerAge,u=z()(l,ke);return u},[]),g=(0,v.useMemo)(function(){return[{title:"\u5E8F\u53F7",dataIndex:"storyNo",hideInSearch:!0,render:function(l,o,u){return u+1}},{title:"\u5267\u60C5\u6807\u9898",dataIndex:"storyTitle"},{title:"\u5267\u60C5\u7C7B\u578B",dataIndex:"storyTypeCode",valueType:"select",request:function(){var i=x()(d()().mark(function o(){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.Rf)("storyType");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)}));function l(){return i.apply(this,arguments)}return l}()},{title:"\u9002\u7528\u79CD\u65CF",dataIndex:"raceCode",valueType:"select",request:function(){var i=x()(d()().mark(function o(){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.Rf)("race");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)}));function l(){return i.apply(this,arguments)}return l}()},{title:"\u89E6\u53D1\u5E74\u9F84",dataIndex:"_triggerAge",renderFormItem:function(){return(0,e.jsxs)("div",{className:"flex justify-center items-center",children:[(0,e.jsx)(T.Z.Item,{noStyle:!0,name:"minAge",children:(0,e.jsx)(U.Z,{className:"flex-1",min:0,max:999,placeholder:"\u8BF7\u8F93\u5165"})}),(0,e.jsx)("span",{className:"flex justify-center mx-[5px]",children:"~"}),(0,e.jsx)(T.Z.Item,{noStyle:!0,name:"maxAge",children:(0,e.jsx)(U.Z,{className:"flex-1",min:0,max:999,placeholder:"\u8BF7\u8F93\u5165"})})]})},render:function(l,o){var u=o.minAge,t=o.maxAge;return"".concat(u!=null?u:"").concat(l).concat(t!=null?t:"")}},{title:"\u5929\u8D4B\u6761\u4EF6",dataIndex:"talentIds",hideInSearch:!0,render:function(l,o){var u=o.talents;return u!=null&&u.length?u.map(function(t){var y=t.talentTitle;return y}).join("\u3001"):l}},{title:"\u8054\u52A8\u5267\u60C5",dataIndex:"linkagePlotNames",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",fixed:"right",render:function(l,o){return[o.status===F.i8.OFFLINE?[(0,e.jsx)(L.ZP,{type:"link",size:"small",onClick:function(){s({visible:!0,detailData:o})},children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(L.ZP,{type:"link",size:"small",onClick:function(){return h({type:F.i8.ONLINE,id:o.id})},children:"\u4E0A\u67B6"},"online")]:(0,e.jsx)(W.Z,{size:"small",danger:!1,onConfirm:function(){return h({type:F.i8.OFFLINE,id:o.id})},children:"\u4E0B\u67B6"},"offline"),o.status===F.i8.OFFLINE&&(0,e.jsx)(W.Z,{size:"small",onConfirm:function(){return h({type:F.i8.DELETED,id:o.id})}},"delete")]}}]},[h]);return(0,e.jsxs)(fe._z,{title:"\u5267\u60C5\u7BA1\u7406",children:[(0,e.jsx)(le.Z,{actionRef:c,rowKey:"id",toolBarRender:function(){return[(0,e.jsx)(L.ZP,{type:"primary",icon:(0,e.jsx)($.Z,{}),onClick:function(){return s({visible:!0})},children:"\u65B0\u589E\u5267\u60C5"},"add"),(0,e.jsx)(ue.Z,{importService:de,importCallback:f,children:"\u5BFC\u5165\u5267\u60C5"},"import"),(0,e.jsx)(L.ZP,{icon:(0,e.jsx)(me.Z,{}),onClick:function(){return(0,w.Ww)(r(48537),"\u5267\u60C5\u6A21\u677F.xlsx")},children:"\u4E0B\u8F7D\u6A21\u677F"},"download")]},beforeSearchSubmit:j,querylistReq:se,columns:g}),(0,e.jsx)(Me,E()(E()({},m),{},{reloadTable:f,onOpenChange:function(l){return s(E()({visible:l},l?{}:{detailData:null}))}}))]})},Ve=Ge},48537:function(V,O,r){V.exports=r.p+"static/scenario.e0dde06f.xlsx"}}]);
